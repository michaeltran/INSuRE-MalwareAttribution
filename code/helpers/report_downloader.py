import os
import os.path
import argparse
from download_and_unzip import DownloadAndUnzip


def report_downloader(root_directory, type):
    CUCKOO_ZIP_ID = "1vJ540pR669_IyNiGhBMcd9Z629BT5K8H"
    CUCKOO_DEST_DIR = os.path.join(os.getcwd() + "/" + root_directory, "data/")
    VT_ZIP_ID = "1_7GIZjt85nY44zscX3JntKfDpYyqDVUx"
    VT_DEST_DIR = os.path.join(os.getcwd() + "/" + root_directory, "data/")
    
    os.chdir(root_directory)


    if type == "virustotal":
    	size = 1958334811 # 1.96GB
    	dluz = DownloadAndUnzip(VT_ZIP_ID, VT_DEST_DIR, size)
    elif type == "cuckoo":
    	size = 3215993345 # 3.22GB
    	dluz = DownloadAndUnzip(CUCKOO_ZIP_ID, CUCKOO_DEST_DIR, size)

    dluz.unzip_file_from_google_drive()


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument('-r', '--root', default='../..', help='root directory')
    parser.add_argument('-t', '--type', help='specify "virustotal" or "cuckoo"')
    opts = parser.parse_args()
    report_downloader(opts.root, opts.type)
